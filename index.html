<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Web Kyys Apeka</title>

<!-- FONT ORBITRON -->
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&display=swap" rel="stylesheet">

<style>
:root{
  --u1:#9b5cff;
  --u2:#6f2bdc;
  --u3:#d9cffa;
  --bg1:#0b0414;
  --bg2:#2b003b;
  --card:rgba(20,6,30,0.85);
}

/* BASE */
*{
  margin:0;
  padding:0;
  box-sizing:border-box;
  font-family:'Orbitron',sans-serif;
  color:var(--u3);
  transition:0.25s ease;
}

body{
  background:linear-gradient(180deg,var(--bg1),var(--bg2));
  min-height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
  padding:25px;
}

/* CARD */
.container{
  width:100%;
  max-width:520px;
  padding:28px;
  background:rgba(255,255,255,0.03);
  border-radius:18px;
  border:1px solid rgba(155,92,255,0.2);
  box-shadow:0 0 30px rgba(111,43,220,0.15);
  position:relative;
}

/* LOGO */
.logo{
  width:90px;height:90px;border-radius:50%;
  overflow:hidden;margin:0 auto 10px auto;
  border:3px solid rgba(155,92,255,0.3);
}
.logo img{width:100%;height:100%;object-fit:cover;}

h1{color:var(--u1);font-size:20px;text-align:center;margin-top:8px;}
.creator{font-size:12px;text-align:center;margin-top:4px;color:rgba(217,207,250,0.7);}

/* INPUT */
label{
  font-size:12px;
  color:var(--u1);
  font-weight:700;
  margin-bottom:6px;
}
.input-group{margin-top:15px;}

input{
  width:100%;
  padding:14px 16px;
  background:var(--card);
  border:1px solid rgba(155,92,255,0.2);
  border-radius:12px;
  font-size:14px;
  color:var(--u3);
}
input:focus{
  border-color:var(--u1);
  box-shadow:0 0 12px rgba(155,92,255,0.25);
}

/* ROW */
.row{display:flex;gap:14px;}
.row .col{flex:1;}

/* BUTTON */
.button{
  width:100%;padding:14px;
  background:linear-gradient(90deg,var(--u1),var(--u2));
  border:none;border-radius:12px;
  font-weight:700;font-size:14px;
  margin-top:18px;
  cursor:pointer;
  box-shadow:0 0 18px rgba(155,92,255,0.18);
}
.button:hover{transform:translateY(-2px);}
.button.secondary{
  background:transparent;
  border:1px solid rgba(155,92,255,0.25);
}

/* LOADING */
.loading{
  display:none;margin-top:20px;text-align:center;
}
.spinner{
  width:46px;height:46px;margin:auto;margin-bottom:10px;
  border-radius:50%;
  border:5px solid rgba(255,255,255,0.08);
  border-top:5px solid var(--u1);
  animation:spin 1s linear infinite;
}
@keyframes spin{to{transform:rotate(360deg);}}

/* RESULT */
.result{
  display:none;margin-top:20px;text-align:center;
}
.result img{
  max-width:100%;
  border-radius:12px;
  border:2px solid rgba(155,92,255,0.25);
}

.download-btn{
  display:inline-block;
  padding:12px 20px;
  margin-top:10px;
  background:linear-gradient(90deg,var(--u1),var(--u2));
  border-radius:10px;
  text-decoration:none;
  font-weight:700;
}

/* SMOOTH ERROR TEXT */
#errorText{
  margin-top:12px;
  text-align:center;
  font-size:12px;
  color:#ff8fd6;
  opacity:0;
  transform:translateY(5px);
  transition:0.35s ease;
}
.error-show{
  opacity:1 !important;
  transform:translateY(0) !important;
}
</style>
</head>
<body>

<div class="container">

  <div class="logo">
    <img src="https://raw.githubusercontent.com/Kyys435/iqc_v2.Dev.kyys-apeka/main/app_icon.png">
  </div>

  <h1>iPhone Quoted Generator V2</h1>
  <div class="creator">Create Kyys Apeka</div>

  <div class="input-group">
    <label>Masukkan Text</label>
    <input id="messageText" type="text" placeholder="Dev Kyys Apeka">
  </div>

  <div class="row" style="margin-top:15px;">
    <div class="col input-group">
      <label>Operator</label>
      <input id="carrierName" type="text" value="Telkomsel">
    </div>

    <div class="col input-group">
      <label>Baterai</label>
      <input id="batteryPercentage" type="number" min="0" max="100" value="87">
    </div>
  </div>

  <button id="generateBtn" class="button">Create</button>
  <button id="resetBtn" class="button secondary">Reset</button>

  <!-- ERROR TEXT SMOOTH -->
  <div id="errorText"></div>

  <div id="loading" class="loading">
    <div class="spinner"></div>
    Sedang membuat gambar...
  </div>

  <div id="result" class="result">
    <img id="resultImage" src="">
    <a id="downloadBtn" class="download-btn" href="#" download="iphone-quoted.png">Download Gambar</a>
  </div>

</div>

<script>
(function(){
  const genBtn = document.getElementById("generateBtn");
  const resetBtn = document.getElementById("resetBtn");
  const loadBox = document.getElementById("loading");
  const resultWrap = document.getElementById("result");
  const resultImg = document.getElementById("resultImage");
  const dlBtn = document.getElementById("downloadBtn");
  const errText = document.getElementById("errorText");

  const timeValue = "09:41";
  const signalStrength = 3;

  function showLoading(s){ loadBox.style.display = s?"block":"none"; }
  function showResult(s){ resultWrap.style.display = s?"block":"none"; }

  function showError(msg){
    errText.textContent = msg;
    errText.classList.add("error-show");
    setTimeout(()=> errText.classList.remove("error-show"), 2000);
  }

  genBtn.onclick = () => {
    const msg = messageText.value.trim();
    if(!msg){
      showError("Text nya isilah");
      return;
    }

    const op = carrierName.value.trim();
    const bat = batteryPercentage.value;

    showLoading(true);
    showResult(false);

    const url =
      `https://brat.siputzx.my.id/iphone-quoted?time=${timeValue}`+
      `&messageText=${encodeURIComponent(msg)}`+
      `&carrierName=${encodeURIComponent(op)}`+
      `&batteryPercentage=${bat}`+
      `&signalStrength=${signalStrength}`+
      `&emojiStyle=apple&_=${Date.now()}`;

    resultImg.onload = ()=>{
      showLoading(false);
      showResult(true);
      dlBtn.href = resultImg.src;
    };

    resultImg.onerror = ()=>{
      showLoading(false);
      showError("Gagal generate gambar.");
    };

    resultImg.src = url;
  };

  resetBtn.onclick = ()=>{
    messageText.value = "";
    carrierName.value = "Telkomsel";
    batteryPercentage.value = 87;
    showResult(false);
    showLoading(false);
  };

})();
</script>

</body>
</html>